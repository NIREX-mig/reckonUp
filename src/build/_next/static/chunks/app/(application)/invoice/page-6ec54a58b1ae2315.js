(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9],{7512:function(e,t,r){Promise.resolve().then(r.bind(r,4509))},4509:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var s=r(7437),a=r(434),l=r(2265),n=()=>{let{addProductList:e,setAddProductList:t,setGrossAmt:r,grossAmt:n}=(0,l.useContext)(a.Z),c=s=>{s>-1&&(r(n-e[s].amount),t(e.slice(0,s).concat(e.slice(s+1))))};return(0,s.jsx)("div",{className:" overflow-x-auto shadow-md sm:rounded-lg h-[15rem]",children:(0,s.jsxs)("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500",children:[(0,s.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-2",children:"Product Name"}),(0,s.jsx)("th",{scope:"col",className:"px-3 py-2",children:"Category"}),(0,s.jsx)("th",{scope:"col",className:"px-3 py-2",children:"Rate"}),(0,s.jsx)("th",{scope:"col",className:"px-3 py-2",children:"Net Weight"}),(0,s.jsx)("th",{scope:"col",className:"px-3 py-2",children:"Quantity"}),(0,s.jsx)("th",{scope:"col",className:"px-3 py-2",children:"Amount"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-2",children:"Action"})]})}),(0,s.jsx)("tbody",{children:null==e?void 0:e.map((e,t)=>(0,s.jsxs)("tr",{className:"odd:bg-white even:bg-gray-100 border-b cursor-pointer",children:[(0,s.jsx)("th",{scope:"row",className:"px-6 py-2 font-medium text-gray-900 whitespace-nowrap capitalize",children:e.productName}),(0,s.jsx)("td",{className:"px-3 py-2",children:e.category}),(0,s.jsx)("td",{className:"px-3 py-2",children:e.rate}),(0,s.jsx)("td",{className:"px-3 py-2",children:e.netWeight}),(0,s.jsx)("td",{className:"px-3 py-2",children:e.quantity}),(0,s.jsx)("td",{className:"px-3 py-2",children:"â‚¹ ".concat(e.amount)}),(0,s.jsx)("td",{className:"px-3 py-2",children:(0,s.jsx)("button",{type:"button",onClick:()=>{c(t)},className:"font-medium text-red-600 hover:underline",children:"Delete"})})]},t))})]})})},c=r(6356),o=r(3580),i=r(6463),d=r(4008);function m(){let{addProductList:e,setAddProductList:t,showModal:r,setFullInvoiceData:m,setGrossAmt:u,grossAmt:g,netAmt:x,setNetAmt:b}=(0,l.useContext)(a.Z),h=(0,i.useRouter)(),[p,y]=(0,l.useState)({customerName:"",phone:"",address:"",GstIn:""}),[f,N]=(0,l.useState)(""),[j,v]=(0,l.useState)({rate:"",quantity:"",productName:"",netWeight:""}),[w,k]=(0,l.useState)({productName:"",weight:"",percentage:"",exchangeAmt:0}),[C,O]=(0,l.useState)("gold"),[P,A]=(0,l.useState)("select"),[S,q]=(0,l.useState)(0),[F,E]=(0,l.useState)(!1),[W,G]=(0,l.useState)({cgst:"",sgst:""}),D=e=>{let t=e.target.name,r=e.target.value;G({...W,[t]:r})},I=e=>{let t=e.target.name,r=e.target.value;y({...p,[t]:r})},T=e=>{let t=e.target.name,r=e.target.value;v({...j,[t]:r})},_=e=>{let t=e.target.name,r=e.target.value;k({...w,[t]:r})},z=async()=>{try{let e=await fetch("http://localhost:8000/api/v1/invoice/count",{method:"GET",credentials:"include"}),t=await e.json();if(t.success){let e="E-0".concat(t.data+1);N(e)}}catch(e){o.Am.error(e.message,{position:"top-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"})}},R=async()=>{try{let t=x*(Number(W.cgst)+Number(W.sgst))/100,r=x+t-Number(w.exchangeAmt),s={customerName:p.customerName,customerPhone:p.phone,customerAddress:p.address,invoiceNo:f,productList:e,grossAmt:g,makingCost:S,netAmt:r,newInvoice:!0,GST:F,gstAmt:t,cgst:Number(W.cgst),sgst:Number(W.sgst),exchangeAmt:w.exchangeAmt,exchangeCategory:P,exchangePercentage:w.percentage,exchangeWeight:w.weight};if(0===e.length){o.Am.error("Add Atleast One Product!",{position:"top-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"});return}m(s),h.push("/finalInvoice")}catch(e){console.log(e)}};return(0,l.useEffect)(()=>{z()},[h,r]),(0,s.jsxs)("section",{className:" p-4 bg-white rounded-lg m-4 border border-gray-300 shadow-md",children:[(0,s.jsx)("h2",{className:"font-bold text-xl",children:"Invoice detail"}),(0,s.jsxs)("section",{className:"flex-col lg:flex-row w-full lg:h-[15rem] p-2 mt-3 flex gap-2",children:[(0,s.jsxs)("div",{className:"p-2 bg-white shadow-md rounded-lg border lg:w-[22rem] w-full ",children:[(0,s.jsx)("h2",{className:"font-bold",children:"Customer Details"}),(0,s.jsxs)("div",{className:"py-4 w-[19rem]",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2 justify-end",children:[(0,s.jsx)("label",{htmlFor:"customerName",className:"text-sm font-medium text-gray-900",children:"Customer Name:"}),(0,s.jsx)("input",{type:"text",id:"customerName",name:"customerName",autoComplete:"off",value:p.customerName,onChange:I,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2",placeholder:"Customer Name",required:!0})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2 justify-end",children:[(0,s.jsx)("label",{htmlFor:"phone",className:"text-sm font-medium text-gray-900",children:"Phone No:"}),(0,s.jsx)("input",{type:"number",id:"phone",name:"phone",min:"0",value:p.phone,onChange:I,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2",placeholder:"Phone number",required:!0})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2 justify-end",children:[(0,s.jsx)("label",{htmlFor:"address",className:"text-sm font-medium text-gray-900",children:"Address:"}),(0,s.jsx)("input",{type:"text",id:"address",name:"address",autoComplete:"off",value:p.address,onChange:I,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2",placeholder:"address",required:!0})]})]})]}),(0,s.jsxs)("div",{className:"p-2 bg-white shadow-md rounded-lg border w-full",children:[(0,s.jsx)("h2",{className:"font-bold",children:"Exchange Details"}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"py-4 w-[17rem]",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2 justify-end",children:[(0,s.jsx)("label",{htmlFor:"productName",className:"text-sm font-medium text-gray-900",children:"Product Category:"}),(0,s.jsxs)("select",{id:"search",value:P,onChange:e=>{A(e.target.value)},className:"bg-gray-50 border border-gray-600 text-gray-900 text-sm rounded-md focus:ring-black focus:border-black block py-1.5 px-5 ",children:[(0,s.jsx)("option",{defaultValue:"select",className:"p-2",children:"Select"}),(0,s.jsx)("option",{value:"gold",className:"p-2",children:"Gold"}),(0,s.jsx)("option",{value:"silver",className:"p-2",children:"Silver"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2 justify-end",children:[(0,s.jsx)("label",{htmlFor:"weight",className:"text-sm font-medium text-gray-900",children:"Weight:"}),(0,s.jsx)("input",{type:"number",id:"weight",name:"weight",min:"0",step:"0.01",value:w.weight,onChange:_,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:r ing-blue-500 focus:border-blue-500 block py-1.5 px-2",placeholder:"Weight",required:!0})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,s.jsx)("label",{htmlFor:"percentage",className:"text-sm font-medium text-gray-900",children:"percentage:"}),(0,s.jsx)("input",{type:"number",id:"percentage",name:"percentage",min:"0",autoComplete:"off",value:w.percentage,onChange:_,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2 mb-1",placeholder:"Percentage",required:!0})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,s.jsx)("label",{htmlFor:"exchangeAmt",className:"text-sm font-medium text-gray-900",children:"Amount:"}),(0,s.jsx)("input",{type:"number",id:"exchangeAmt",name:"exchangeAmt",min:"0",autoComplete:"off",value:w.exchangeAmt,onChange:_,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2",placeholder:"Exchange Amt",required:!0})]})]})})]}),(0,s.jsxs)("div",{className:"p-3 bg-white shadow-md rounded-lg border w-full",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("h2",{className:"font-bold",children:"Product Details"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("label",{htmlFor:"invoiceNo",className:"text-sm font-medium text-gray-900",children:"Invoice No:"}),(0,s.jsx)("input",{type:"text",id:"invoiceNo",name:"invoiceNO",value:f,readOnly:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2",placeholder:"Invoice No",required:!0}),(0,s.jsx)(d.lgS,{size:25,className:"hover:cursor-pointer active:animate-spin",onClick:z})]})]}),(0,s.jsxs)("form",{onSubmit:t=>{t.preventDefault();let r=Number(j.rate),s=Number(j.netWeight),a=Number(j.quantity),l=r/10*s;l=Number(l.toFixed(2));let n={productName:j.productName,category:C,netWeight:s,quantity:a,amount:l,rate:r};e.push(n),v({rate:"",quantity:"",productName:"",netWeight:""});let c=0;e.map(e=>c+=e.amount),u(Number(c.toFixed(2)))},children:[(0,s.jsx)("div",{className:"p-2",children:(0,s.jsxs)("div",{className:"flex  gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("label",{htmlFor:"rate",className:"text-sm font-medium text-gray-900",children:"Rate:"}),(0,s.jsx)("input",{type:"number",id:"rate",name:"rate",min:"0",value:j.rate,onChange:T,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2 w-[10rem]",placeholder:"rate",required:!0})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("label",{htmlFor:"product",className:"text-sm font-medium text-gray-900",children:"Category:"}),(0,s.jsxs)("select",{id:"search",value:C,onChange:e=>{O(e.target.value)},className:"bg-gray-50 border border-gray-600 text-gray-900 text-sm rounded-md focus:ring-black focus:border-black block p-1.5",children:[(0,s.jsx)("option",{defaultValue:"gold",children:"Gold"}),(0,s.jsx)("option",{value:"silver",children:"Silver"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("label",{htmlFor:"quantity",className:"text-sm font-medium text-gray-900",children:"Quantity:"}),(0,s.jsx)("input",{type:"number",id:"quantity",name:"quantity",min:"0",value:j.quantity,onChange:T,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2 w-[5rem]",placeholder:"Quantity",required:!0})]})]})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("label",{htmlFor:"productName",className:"text-sm font-medium text-gray-900",children:"Product:"}),(0,s.jsx)("input",{type:"text",id:"productName",name:"productName",autoComplete:"off",value:j.productName,onChange:T,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2 lg:w-[18rem] w-full",placeholder:"Product Name",required:!0})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("label",{htmlFor:"netWeight",className:"text-sm font-medium text-gray-900",children:"Net Weight (in gram):"}),(0,s.jsx)("input",{type:"number",id:"netWeight",name:"netWeight",min:"0",step:"0.01",value:j.netWeight,onChange:T,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2 w-[10rem]",placeholder:"Net Weight",required:!0})]}),(0,s.jsxs)("button",{type:"submit",className:"text-white bg-black/90 hover:bg-black focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-8 py-2.5 text-center flex gap-3 mr-7",children:[(0,s.jsx)(c.Mj8,{size:20}),"Add"]})]})]})]})]})]}),(0,s.jsx)("section",{className:"mt-2",children:(0,s.jsx)(n,{})}),(0,s.jsxs)("section",{className:"w-full p-2 border rounded-lg mt-2 flex justify-between",children:[(0,s.jsx)("div",{}),(0,s.jsxs)("div",{className:"my-auto flex gap-3 ",children:[(0,s.jsx)("button",{type:"button",onClick:R,className:"text-white bg-black/90 hover:bg-black focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-6 py-2.5 text-center flex gap-3 mb-2",children:"Genrate invoice"}),(0,s.jsx)("button",{type:"button",onClick:()=>{y({customerName:"",phone:"",address:""}),k({productName:"",weight:"",percentage:"",exchangeAmt:""}),v({rate:"",quantity:"",productName:"",netWeight:""}),q(0),b(0),u(0),t([])},className:"text-white bg-red-600 hover:bg-red-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-6 py-2.5 text-center flex gap-3 mb-2",children:"Clear invoice"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center h-5 mb-2",children:[(0,s.jsx)("input",{id:"remember",type:"checkbox",value:F,className:"w-4 h-4 border border-gray-300 rounded bg-gray-50",onChange:e=>{E(!F)},checked:F,required:!0}),(0,s.jsx)("label",{className:"",children:"GST INVOICE"})]}),(0,s.jsx)("div",{className:"",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,s.jsx)("label",{htmlFor:"cgst",className:"text-sm font-medium inline-block ".concat(!F&&"text-gray-300"),children:"CGST(%):"}),(0,s.jsx)("input",{type:"number",id:"cgst",name:"cgst",min:"0",step:"0.01",value:W.cgst,onChange:D,className:"bg-white border border-gray-300 text-gray-900 text-sm rounded-md block w-[3rem] py-1 px-2 mb-0.5 ".concat(!F&&"text-gray-300"," "),disabled:!F}),(0,s.jsx)("p",{className:"".concat(!F&&"text-gray-300"," text-black"),children:"%"})]})}),(0,s.jsx)("div",{className:"",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,s.jsx)("label",{htmlFor:"sgst",className:"text-sm font-medium  inline-block ".concat(!F&&"text-gray-300"),children:"SGST(%):"}),(0,s.jsx)("input",{type:"number",id:"sgst",name:"sgst",min:"0",step:"0.01",value:W.sgst,onChange:D,className:"bg-white border border-gray-300 text-gray-900 text-sm rounded-md block w-[3rem] py-1 px-2 mb-0.5 ".concat(!F&&"text-gray-300"," "),disabled:!F}),(0,s.jsx)("p",{className:"".concat(!F&&"text-gray-300"," text-black"),children:"%"})]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,s.jsx)("label",{htmlFor:"grossAmt",className:"text-sm font-medium text-gray-900 inline-block",children:"Gross Total :"}),(0,s.jsx)("input",{type:"number",id:"grossAmt",name:"grossAmt",min:"0",value:g,readOnly:!0,className:"bg-white border border-gray-300 text-gray-900 text-sm rounded-md block w-[10rem] py-1 px-2 mb-0.5 "})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,s.jsx)("label",{htmlFor:"makingCost",className:"text-sm font-medium text-gray-900 inline-block",children:"Making Cost (in %) :"}),(0,s.jsx)("input",{type:"number",id:"makingCost",name:"makingCost",min:"0",value:S,onChange:e=>{q(e.target.value);let t=g*e.target.value/100,r=g+t;b(r=Number(r.toPrecision()))},className:"bg-white border border-gray-300 text-gray-900 text-sm rounded-md block w-[10rem] py-1 px-2 mb-0.5 "})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,s.jsx)("label",{htmlFor:"netAmt",className:"text-sm font-medium text-gray-900 inline-block",children:"Net Amt :"}),(0,s.jsx)("input",{type:"number",id:"netAmt",min:"0",name:"netAmt",value:x,readOnly:!0,className:"bg-white border border-gray-300 text-gray-900 text-sm rounded-md block w-[10rem] py-1 px-2 "})]})]})]})]})}},434:function(e,t,r){"use strict";let s=(0,r(2265).createContext)();t.Z=s},6463:function(e,t,r){"use strict";var s=r(1169);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},1810:function(e,t,r){"use strict";r.d(t,{w_:function(){return d}});var s=r(2265),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=s.createContext&&s.createContext(a),n=["attr","size","title"];function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){var s,a;s=t,a=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>s.createElement(m,c({attr:i({},e.attr)},t),function e(t){return t&&t.map((t,r)=>s.createElement(t.tag,i({key:r},t.attr),e(t.child)))}(e.child))}function m(e){var t=t=>{var r,{attr:a,size:l,title:o}=e,d=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)r=l[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,n),m=l||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",c({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,d,{className:r,style:i(i({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),o&&s.createElement("title",null,o),e.children)};return void 0!==l?s.createElement(l.Consumer,null,e=>t(e)):t(a)}}},function(e){e.O(0,[51,422,580,971,23,744],function(){return e(e.s=7512)}),_N_E=e.O()}]);