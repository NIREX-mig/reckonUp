(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[705],{4996:function(e,t,r){Promise.resolve().then(r.bind(r,258))},258:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var a=r(7437),s=r(434),l=r(2265),n=()=>{let{addProductList:e,setAddProductList:t,setGrossAmt:r,grossAmt:n,setNetAmt:o,netAmt:c}=(0,l.useContext)(s.Z),i=a=>{a>-1&&(r(n-e[a].amount),t(e.slice(0,a).concat(e.slice(a+1))))};return(0,a.jsx)("div",{className:" overflow-x-auto shadow-md sm:rounded-lg h-[15rem]",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500",children:[(0,a.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-2",children:"Product Name"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-2",children:"Category"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-2",children:"Rate"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-2",children:"Net Weight"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-2",children:"Quantity"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-2",children:"Amount"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-2",children:"Action"})]})}),(0,a.jsx)("tbody",{children:null==e?void 0:e.map((e,t)=>(0,a.jsxs)("tr",{className:"odd:bg-white even:bg-gray-100 border-b cursor-pointer",children:[(0,a.jsx)("th",{scope:"row",className:"px-6 py-2 font-medium text-gray-900 whitespace-nowrap capitalize",children:e.productName}),(0,a.jsx)("td",{className:"px-3 py-2",children:e.category}),(0,a.jsx)("td",{className:"px-3 py-2",children:e.rate}),(0,a.jsx)("td",{className:"px-3 py-2",children:e.netWeight}),(0,a.jsx)("td",{className:"px-3 py-2",children:e.quantity}),(0,a.jsx)("td",{className:"px-3 py-2",children:"â‚¹ ".concat(e.amount)}),(0,a.jsx)("td",{className:"px-3 py-2",children:(0,a.jsx)("button",{type:"button",onClick:()=>{i(t)},className:"font-medium text-red-600 hover:underline",children:"Delete"})})]},t))})]})})},o=r(6356),c=r(3580),i=r(6463);function d(){let{addProductList:e,setAddProductList:t,showModal:r,handlePrint:d,setFullInvoiceData:m,setGrossAmt:u,grossAmt:x,netAmt:g,setNetAmt:p,ownerDetails:h}=(0,l.useContext)(s.Z),b=(0,i.useRouter)(),[y,f]=(0,l.useState)({customerName:"",phone:"",address:""}),[N,j]=(0,l.useState)(""),[v,w]=(0,l.useState)({rate:"",quantity:"",productName:"",netWeight:""}),[C,k]=(0,l.useState)({productName:"",weight:"",percentage:"",exchangeAmt:""}),[O,P]=(0,l.useState)("gold"),[A,q]=(0,l.useState)("select"),[F,S]=(0,l.useState)(0);(0,l.useEffect)(()=>{localStorage.getItem("accessToken")||b.push("/login"),_()},[b,r]);let E=e=>{let t=e.target.name,r=e.target.value;f({...y,[t]:r})},W=e=>{let t=e.target.name,r=e.target.value;w({...v,[t]:r})},D=e=>{let t=e.target.name,r=e.target.value;k({...C,[t]:r})},_=async()=>{try{let e=await fetch("http://localhost:8000/api/v1/invoice/count",{method:"GET"}),t=await e.json();if(t.success){let e="E-0".concat(t.data+1);j(e)}}catch(e){c.Am.error(e.message,{position:"top-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"})}},I=async()=>{try{let t={customerName:y.customerName,customerPhone:y.phone,customerAddress:y.address,invoiceNo:N,productList:e,grossAmt:x,makingCost:F,netAmt:g,exchangeAmt:C.exchangeAmt,exchangeCategory:A,exchangePercentage:C.percentage};if(0===e.length){c.Am.error("Add Atleast One Product!",{position:"top-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"});return}m(t),b.push("/finalInvoice")}catch(e){console.log(e)}};return(0,a.jsxs)("section",{className:" p-4 bg-white rounded-lg m-4 border border-gray-300 shadow-md",children:[(0,a.jsx)("h2",{className:"font-bold text-xl",children:"Invoice detail"}),(0,a.jsxs)("section",{className:"flex-col lg:flex-row w-full lg:h-[15rem] p-2 mt-3 flex gap-2",children:[(0,a.jsxs)("div",{className:"p-2 bg-white shadow-md rounded-lg border lg:w-[22rem] w-full ",children:[(0,a.jsx)("h2",{className:"font-bold",children:"Customer Details"}),(0,a.jsxs)("div",{className:"py-4 w-[19rem]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2 justify-end",children:[(0,a.jsx)("label",{htmlFor:"customerName",className:"text-sm font-medium text-gray-900",children:"Customer Name:"}),(0,a.jsx)("input",{type:"text",id:"customerName",name:"customerName",autoComplete:"off",value:y.customerName,onChange:E,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2",placeholder:"Customer Name",required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2 justify-end",children:[(0,a.jsx)("label",{htmlFor:"phone",className:"text-sm font-medium text-gray-900",children:"Phone No:"}),(0,a.jsx)("input",{type:"number",id:"phone",name:"phone",min:"0",value:y.phone,onChange:E,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2",placeholder:"Phone number",required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,a.jsx)("label",{htmlFor:"address",className:"text-sm font-medium text-gray-900",children:"Address:"}),(0,a.jsx)("input",{type:"text",id:"address",name:"address",autoComplete:"off",value:y.address,onChange:E,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2",placeholder:"address",required:!0})]})]})]}),(0,a.jsxs)("div",{className:"p-2 bg-white shadow-md rounded-lg border w-full",children:[(0,a.jsx)("h2",{className:"font-bold",children:"Exchange Details"}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"py-4 w-[17rem]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2 justify-end",children:[(0,a.jsx)("label",{htmlFor:"productName",className:"text-sm font-medium text-gray-900",children:"Product Category:"}),(0,a.jsxs)("select",{id:"search",value:A,onChange:e=>{q(e.target.value)},className:"bg-gray-50 border border-gray-600 text-gray-900 text-sm rounded-md focus:ring-black focus:border-black block py-1.5 px-5 ",children:[(0,a.jsx)("option",{defaultValue:"select",className:"p-2",children:"Select"}),(0,a.jsx)("option",{value:"gold",className:"p-2",children:"Gold"}),(0,a.jsx)("option",{value:"silver",className:"p-2",children:"Silver"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2 justify-end",children:[(0,a.jsx)("label",{htmlFor:"weight",className:"text-sm font-medium text-gray-900",children:"Weight:"}),(0,a.jsx)("input",{type:"number",id:"weight",name:"weight",min:"0",step:"0.01",value:C.weight,onChange:D,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:r ing-blue-500 focus:border-blue-500 block py-1.5 px-2",placeholder:"Weight",required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,a.jsx)("label",{htmlFor:"percentage",className:"text-sm font-medium text-gray-900",children:"percentage:"}),(0,a.jsx)("input",{type:"number",id:"percentage",name:"percentage",min:"0",autoComplete:"off",value:C.percentage,onChange:D,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2 mb-1",placeholder:"Percentage",required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,a.jsx)("label",{htmlFor:"exchangeAmt",className:"text-sm font-medium text-gray-900",children:"Amount:"}),(0,a.jsx)("input",{type:"number",id:"exchangeAmt",name:"exchangeAmt",min:"0",autoComplete:"off",value:C.exchangeAmt,onChange:D,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2",placeholder:"Exchange Amt",required:!0})]})]})})]}),(0,a.jsxs)("div",{className:"p-3 bg-white shadow-md rounded-lg border w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("h2",{className:"font-bold",children:"Product Details"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("label",{htmlFor:"invoiceNo",className:"text-sm font-medium text-gray-900",children:"Invoice No:"}),(0,a.jsx)("input",{type:"text",id:"invoiceNo",name:"invoiceNO",value:N,readOnly:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2",placeholder:"Invoice No",required:!0})]})]}),(0,a.jsxs)("form",{onSubmit:t=>{t.preventDefault();let r=Number(v.rate),a=Number(v.netWeight),s=Number(v.quantity),l=r/10*a;l=Number(l.toFixed(2));let n={productName:v.productName,category:O,netWeight:a,quantity:s,amount:l,rate:r};e.push(n),w({rate:"",quantity:"",productName:"",netWeight:""});let o=0;e.map(e=>o+=e.amount),u(Number(o.toFixed(2)))},children:[(0,a.jsx)("div",{className:"p-2",children:(0,a.jsxs)("div",{className:"flex  gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("label",{htmlFor:"rate",className:"text-sm font-medium text-gray-900",children:"Rate:"}),(0,a.jsx)("input",{type:"number",id:"rate",name:"rate",min:"0",value:v.rate,onChange:W,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2 w-[10rem]",placeholder:"rate",required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("label",{htmlFor:"product",className:"text-sm font-medium text-gray-900",children:"Category:"}),(0,a.jsxs)("select",{id:"search",value:O,onChange:e=>{P(e.target.value)},className:"bg-gray-50 border border-gray-600 text-gray-900 text-sm rounded-md focus:ring-black focus:border-black block p-1.5",children:[(0,a.jsx)("option",{defaultValue:"gold",children:"Gold"}),(0,a.jsx)("option",{value:"silver",children:"Silver"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("label",{htmlFor:"quantity",className:"text-sm font-medium text-gray-900",children:"Quantity:"}),(0,a.jsx)("input",{type:"number",id:"quantity",name:"quantity",min:"0",value:v.quantity,onChange:W,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2 w-[5rem]",placeholder:"Quantity",required:!0})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("label",{htmlFor:"productName",className:"text-sm font-medium text-gray-900",children:"Product:"}),(0,a.jsx)("input",{type:"text",id:"productName",name:"productName",autoComplete:"off",value:v.productName,onChange:W,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2 lg:w-[18rem] w-full",placeholder:"Product Name",required:!0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("label",{htmlFor:"netWeight",className:"text-sm font-medium text-gray-900",children:"Net Weight (in gram):"}),(0,a.jsx)("input",{type:"number",id:"netWeight",name:"netWeight",min:"0",step:"0.01",value:v.netWeight,onChange:W,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block py-1.5 px-2 w-[10rem]",placeholder:"Net Weight",required:!0})]}),(0,a.jsxs)("button",{type:"submit",className:"text-white bg-black/90 hover:bg-black focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-8 py-2.5 text-center flex gap-3 mr-7",children:[(0,a.jsx)(o.Mj8,{size:20}),"Add"]})]})]})]})]})]}),(0,a.jsx)("section",{className:"mt-2",children:(0,a.jsx)(n,{})}),(0,a.jsxs)("section",{className:"w-full p-2 border rounded-lg mt-2 flex justify-between",children:[(0,a.jsx)("div",{}),(0,a.jsxs)("div",{className:"my-auto flex gap-3 ",children:[(0,a.jsx)("button",{type:"button",onClick:I,className:"text-white bg-black/90 hover:bg-black focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-6 py-2.5 text-center flex gap-3 mb-2",children:"Genrate invoice"}),(0,a.jsx)("button",{type:"button",onClick:()=>{f({customerName:"",phone:"",address:""}),k({productName:"",weight:"",percentage:"",exchangeAmt:""}),w({rate:"",quantity:"",productName:"",netWeight:""}),S(0),p(0),u(0),t([])},className:"text-white bg-red-600 hover:bg-red-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-6 py-2.5 text-center flex gap-3 mb-2",children:"Clear invoice"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,a.jsx)("label",{htmlFor:"grossAmt",className:"text-sm font-medium text-gray-900 inline-block",children:"Gross Total :"}),(0,a.jsx)("input",{type:"number",id:"grossAmt",name:"grossAmt",min:"0",value:x,readOnly:!0,className:"bg-white border border-gray-300 text-gray-900 text-sm rounded-md block w-[10rem] py-1 px-2 mb-0.5 "})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,a.jsx)("label",{htmlFor:"makingCost",className:"text-sm font-medium text-gray-900 inline-block",children:"Making Cost (in %) :"}),(0,a.jsx)("input",{type:"number",id:"makingCost",name:"makingCost",min:"0",value:F,onChange:e=>{S(e.target.value);let t=e.target.value/100*x,r=x+t;p(r=Number(r.toPrecision()))},className:"bg-white border border-gray-300 text-gray-900 text-sm rounded-md block w-[10rem] py-1 px-2 mb-0.5 "})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,a.jsx)("label",{htmlFor:"netAmt",className:"text-sm font-medium text-gray-900 inline-block",children:"Net Amt :"}),(0,a.jsx)("input",{type:"number",id:"netAmt",min:"0",name:"netAmt",value:g,readOnly:!0,className:"bg-white border border-gray-300 text-gray-900 text-sm rounded-md block w-[10rem] py-1 px-2 "})]})]})]})]})}},434:function(e,t,r){"use strict";let a=(0,r(2265).createContext)();t.Z=a},6463:function(e,t,r){"use strict";var a=r(1169);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},1810:function(e,t,r){"use strict";r.d(t,{w_:function(){return d}});var a=r(2265),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=a.createContext&&a.createContext(s),n=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var a,s;a=t,s=r[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(a))in e?Object.defineProperty(e,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[a]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>a.createElement(m,o({attr:i({},e.attr)},t),function e(t){return t&&t.map((t,r)=>a.createElement(t.tag,i({key:r},t.attr),e(t.child)))}(e.child))}function m(e){var t=t=>{var r,{attr:s,size:l,title:c}=e,d=function(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)r=l[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,n),m=l||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,d,{className:r,style:i(i({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),c&&a.createElement("title",null,c),e.children)};return void 0!==l?a.createElement(l.Consumer,null,e=>t(e)):t(s)}}},function(e){e.O(0,[51,580,971,23,744],function(){return e(e.s=4996)}),_N_E=e.O()}]);