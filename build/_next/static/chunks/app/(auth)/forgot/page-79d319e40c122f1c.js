(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[701],{5810:function(e,t,s){Promise.resolve().then(s.bind(s,6204))},6204:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(7437),r=s(6648),o=s(2265),l=e=>{let{finalOtp:t,setFinalOtp:s,handleOtpSumbmit:r}=e;return(0,a.jsxs)("div",{className:"w-[30rem]",children:[(0,a.jsx)("h3",{className:"text-center font-bold text-4xl mb-4",children:"OTP Verification"}),(0,a.jsx)("p",{className:"text-center text-lg mb-5",children:"Enter The 6-Digit OTP You Have Received!"}),(0,a.jsxs)("form",{onSubmit:r,className:"p-4 w-[27rem] mx-auto",children:[(0,a.jsx)("div",{className:"mb-5",children:(0,a.jsx)("input",{type:"text",name:"otp",autoComplete:"off",value:t,onChange:e=>s(e.target.value),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-black focus:border-black block w-full p-2.5"})}),(0,a.jsx)("button",{type:"submit",className:"text-white bg-black/90 hover:bg-black   rounded-lg text-sm p-2.5 text-center mx-auto w-full",children:"Verify OTP"})]})]})},n=e=>{let{handleOnChange:t,username:s,handleUsernameSubmit:r}=e;return(0,a.jsxs)("div",{className:"w-[30rem]",children:[(0,a.jsx)("h3",{className:"text-center font-bold text-4xl mb-4",children:"Forgot Password"}),(0,a.jsx)("p",{className:"text-center text-lg mb-5",children:"Provide Your Username To Reset Your Password!"}),(0,a.jsxs)("form",{onSubmit:r,className:"p-4 w-[27rem] mx-auto",children:[(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsx)("label",{htmlFor:"username",className:"block mb-3 text-sm  text-gray-900",children:"Username"}),(0,a.jsx)("input",{type:"text",id:"username",name:"username",autoComplete:"off",value:s,onChange:t,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-black focus:border-black block w-full p-2.5",placeholder:"Username",required:!0})]}),(0,a.jsx)("button",{type:"submit",className:"text-white bg-black/90 hover:bg-black   rounded-lg text-sm p-2.5 text-center mx-auto w-full",children:"Next"})]})]})},c=e=>{let{formData:t,setFormData:s,handleNewPasswordSubmit:r}=e,o=e=>{let a=e.target.name,r=e.target.value;s({...t,[a]:r})};return(0,a.jsxs)("div",{className:"w-[30rem]",children:[(0,a.jsx)("h3",{className:"text-center font-bold text-4xl mb-4",children:"New Credentials"}),(0,a.jsx)("p",{className:"text-center text-lg mb-5",children:"Your identity has been verified!"}),(0,a.jsx)("p",{className:"text-center text-lg mb-5",children:"Set your new password."}),(0,a.jsxs)("form",{onSubmit:r,className:"p-4 w-[27rem] mx-auto",children:[(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsx)("label",{htmlFor:"newpassword",className:"block mb-3 text-sm  text-gray-900",children:"New Password"}),(0,a.jsx)("input",{type:"password",name:"newpassword",autoComplete:"off",value:t.newpassword,onChange:o,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-black focus:border-black block w-full p-2.5",placeholder:"New Password",required:!0})]}),(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsx)("label",{htmlFor:"confirmpassword",className:"block mb-3 text-sm  text-gray-900",children:"Confirm Password"}),(0,a.jsx)("input",{type:"password",name:"comfirmpassword",autoComplete:"off",value:t.comfirmpassword,onChange:o,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-black focus:border-black block w-full p-2.5",placeholder:"Confirm Password",required:!0})]}),(0,a.jsx)("button",{type:"submit",className:"text-white bg-black/90 hover:bg-black   rounded-lg text-sm p-2.5 text-center mx-auto w-full",children:"Update Password"})]})]})},i=s(3580),m=s(6463);function d(){let e=(0,m.useRouter)(),[t,s]=(0,o.useState)(""),[d,u]=(0,o.useState)(""),[p,g]=(0,o.useState)({newpassword:"",comfirmpassword:""}),[h,b]=(0,o.useState)(!0),[x,f]=(0,o.useState)(!1),[w,y]=(0,o.useState)(!1),v=async e=>{e.preventDefault();try{let e=await fetch("http://localhost:8000/api/v1/auth/forgotemail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t})}),s=await e.json();s.success?(localStorage.setItem("tempToken",s.data),i.Am.success(s.message,{position:"top-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"}),b(!1),f(!0),y(!1)):(i.Am.error(s.message,{position:"top-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"}),f(!1),y(!1),b(!0))}catch(e){i.Am.error(e.message,{position:"top-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"})}},N=async e=>{e.preventDefault();let t=localStorage.getItem("tempToken");try{let e=await fetch("http://localhost:8000/api/v1/auth/validateotp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({otp:d,token:t})}),s=await e.json();s.success?(i.Am.success(s.message,{position:"top-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"}),b(!1),f(!1),y(!0)):(i.Am.error(s.message,{position:"top-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"}),f(!0),y(!1),b(!1))}catch(e){i.Am.error(e.message,{position:"top-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"})}},j=async t=>{t.preventDefault();let s=localStorage.getItem("tempToken");try{let t=await fetch("http://localhost:8000/api/v1/auth/forgotpassword",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({newpassword:p.newpassword,token:s})}),a=await t.json();a.success?(localStorage.removeItem("tempToken"),i.Am.success(a.message,{position:"top-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"}),setTimeout(()=>{e.push("/login")},500)):(i.Am.error(a.message,{position:"top-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"}),f(!1),y(!0),b(!1))}catch(e){i.Am.error(e.message,{position:"top-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"})}};return(0,a.jsxs)("section",{className:"bg-white h-screen flex justify-center gap-5 items-center",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg border shadow-md p-4",children:(0,a.jsx)(r.default,{src:"/LoginAnimation.gif",alt:"loginanimationgif",width:500,height:500,className:"",priority:!0})}),h&&(0,a.jsx)(n,{username:t,handleOnChange:e=>{s(e.target.value)},handleUsernameSubmit:v}),x&&(0,a.jsx)(l,{finalOtp:d,setFinalOtp:u,handleOtpSumbmit:N}),w&&(0,a.jsx)(c,{formData:p,setFormData:g,handleNewPasswordSubmit:j})]})}}},function(e){e.O(0,[580,595,971,23,744],function(){return e(e.s=5810)}),_N_E=e.O()}]);